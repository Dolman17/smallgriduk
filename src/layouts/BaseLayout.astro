---
import "../styles/global.css";

const { title, description, canonicalPath } = Astro.props;

const site = {
  name: "SmallGrid",
  domain: "smallgrid.uk",
  tagline: "Small, efficient, low-power homelabs that don’t become a second job.",
};

const pageTitle = title ? `${title} | ${site.name}` : `${site.name} | ${site.tagline}`;
const metaDesc = description ?? site.tagline;

const canonicalUrl = canonicalPath
  ? `https://${site.domain}${canonicalPath}`
  : `https://${site.domain}${Astro.url.pathname}`;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle}</title>
    <meta name="description" content={metaDesc} />
    <link rel="canonical" href={canonicalUrl} />
  </head>

  <body>
    <header class="header">
      <div class="header-inner">
        <div class="brand">
          <a href="/">SmallGrid</a>
          <small>low-power homelabs • Jellyfin • sane defaults</small>
        </div>

        <nav class="nav">
          <a class="btn" href="/guides/">Guides</a>
          <a class="btn" href="/journal/">Journal</a>
          <a class="btn" href="/about/">About</a>
          <a class="btn" href="/privacy/">Privacy</a>
          <a class="btn primary" href="/contact/">Contact</a>
        </nav>
      </div>
    </header>

    <main class="wrap">
      <slot />
    </main>

    <div class="hr"></div>

    <footer class="footer">
      <div>© {new Date().getFullYear()} SmallGrid.uk</div>
      <div>
        <a href="/privacy/">Privacy</a> · <a href="/cookies/">Cookies</a>
      </div>
    </footer>
  </body>
</html>
